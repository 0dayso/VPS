🔵 简介
    虚拟机用必须要有额外的USB网卡!

    fluxion 无线破解工具，原理更偏向于社会工程学中的钓鱼.让wifi主人自己输入密码. 免去跑包时间
    Fluxion 创建一个和对方一模一样的假wifi. 让对方去连.并弹框要求输入密码. 让就得对方密码了.

    我最喜欢fluxion的原因是它有一个人性化的脚本，
    可以迅速帮你检查所需要的插件并进行安装，
    可以在短时间内搭建出一个完整的环境。
    而且在新版中增加了对中文的支持，这是国外好多安全工具没有的。


🔵 工作原理（大体步骤）

　　1.扫描周围WIFI信号
　　2.抓取握手包(这一步的目的是为了之后验证WiFi密码是否正确)
　　3.使用WEB管理界面
　　4.启动一个假的AP实例来模拟真的AP
　　5.会生成一个MDK3进程。该进程会取消对连接到目标网络的所有用户的认证，可以诱使他们连接到FakeAP并输入WPA密码。
　　6.启动伪DNS服务器以捕获所有DNS请求并将它们重定向到运行攻击脚本的主机.
　　7.随后会弹出一个窗口提示用户输入正确的WiFi密码
　　8.用户输入的密码将和第二步抓到的握手包做比较来核实密码是否正确
　　9.一旦提交正确的密码，攻击将自动终止.这个程序是自动化运行的，并且能够很快的抓取到WiFi密码



🔵 fluxion 最新地址:   https://github.com/wi-fi-analyzer/fluxion


🔵 安装依赖 & 启动:
    👁‍🗨 fluxion目录下有一个‘Installer.sh’脚本文件，运行后会自动更新或安装缺少的工具。

    apt-get install git

    git clone https://github.com/Xu-Jian/fluxion
    cd fluxion && ls
    ./fluxion

    这里的命令 不能在ssh中执行.需要到虚拟机中去..

    运行这个 ./fluxion首先检测软件的所需依赖.
    没安装的 就去安装!!!! 如:
    🔸Dhcpd
        apt-get update
        apt-get dist-upgrade
        apt-get install isc-dhcp-server -y

    🔸Hostapd
      sudo apt-get install hostapd dnsmasq

    🔸lighttpd
      sudo apt-get install lighttpd

    🔸php5-cgi
      ❗️❗️❗️❗️ apt-get install php-cgi
      不要用   apt-get install php5-cgi
      
      kali 2016 默认用的是 php7 不是php5 .
      这里安装 php-cgi 就可以了.


🔵 选择语言 ➜ 6 
🔵 选择网卡 ➜ 1     网卡的话需要大家自己分辨，但是信道选项一般都是选择第一个 
🔵 选择信道 ➜ 1     
    选择完后它会对网卡周围的WiFi进行扫描，扫描到你要破解的WiFi后按Ctrl+C停止。

    👹 这里会中文乱码..

      locale -a 查看当前系统支持的字符集。

      解决策略：
      （以下 的步骤中，可能有冗余的地方，毕竟是自己亲自摸索的，有些地方还是有些不大确定。）
      1.在命令行输入”dpkg-reconfigure locales”。进入图形化界面之后，（空格是选择，Tab是切换，*是选中），选中en_US.UTF-8和zh_CN.UTF-8，确定后，将en_US.UTF-8选为默认。
      2.安装中文字体，”apt-get install xfonts-intl-chinese “和” apt-get install ttf-wqy-microhei”
      3.重启
      4.这时发现网页不乱码，系统也不乱码，但是是英文的界面。打开系统设置，找到设置语言的地方，将语言再改为汉语（中国），再重启。
      5.这时发现系统又变为中文的界面了。


🔵  ctrl c  然后选择一个目标 wifi   

🔵 选择目标后 出现WIFI的基本信息及攻击选项 选择‘1 伪装AP’

🔵 输入握手包存放路径 我们按回车使用默认路径


🔵 选择抓取握手包的工具 我们选择第一个 aircrack-ag套件

🔵 选择攻击方式 我们选择‘1’对所有目标发起deauthentication攻击
    mdk3 攻击方式参考 http://ixuehua.blog.163.com/blog/static/25995203820163285235464/


🔵 出现两个窗口，
一个是deauthentication攻击，此时连在目标路由器的客户端会强制解除验证解除连接掉线；
另一个是aircrack等待抓取握手包，客户端在掉线后重新连接时会抓取握手包。
当在aircrack窗口出现WPA handshake时证明已经抓到握手包，
然后我们选择‘1 检查握手包’

🔵 选择获取密码的方式，
第一种 web注入 也是我们今天只要介绍的 
第二种跑包（暴力破解）之前的文章已经说过 这里我们选泽‘1’



🔵 选择web页面语言，
包括了大部分路由器品牌的页面，
当然我们也可以根据自己的需要在 /fluxion/Sites/ 修改页面。本次演示我们选择7 中文通用页面

这时fluxion会调用多个工具对原有路由器进行攻击，并迫使客户端连接到我们伪造的ap中，
同时对dns进行欺骗将客户端流量转到我们的钓鱼页面


手机会断开原来的wifi 并连接到我们伪造的ap 并弹出认证页面 
由于对dns进行了转发，所以即时关闭认证页面 只要打开任意页面都会转到到这


这时只要用户打开浏览器，就会转到输入WiFi密码的页面。


在通过对比密码正确后，fluxion会关闭伪造的ap 使客户端重新连接到原来的ap 并给出ap密码 退出程序


有问题. 明明密码对的也 提示不对..
试试 其他语言的就可以了...

这里是不会劫持 https网站的.只对http网站有效.




















⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️---实战---⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️⬛️
最后的界面. 
1 有问题!!!
2 可用.
3 也可用..





./fluxion ➜ 6 ➜ 1 ➜ 1 ➜ Ctrl C ➜ 

 360 ➜  
 201 ➜ 可以握手包...时间有点久...     半天没活人输密码....
CF00 ➜ 可以抓到包....  估计没活人...
CF9B ➜ 可以抓到包.... 17










